---

- name: httpd assignment
  hosts: webservers
  remote_user: ansible
  become: true


  tasks:
      - name: Install httpd
        yum:
            name: httpd
            state: latest


      - name: page
        copy:
           content: " Hello txtkrnl\n"
           dest: /var/www/html/index.html


      - name: start httpd
        service:
            name: httpd
            state: started
            enabled: true

      - name: Install firewalld
        service:
            name: firewalld
            state: started
            enabled: true
      - name: Enable firewalld
        service: name=firewalld state=started enabled=yes

      - name: Set dmz as default policy
        command: firewall-cmd --set-default-zone=dmz

      - name: Allow http/https
        command: firewall-cmd --zone=dmz --permanent --add-service=http --add-service=https
